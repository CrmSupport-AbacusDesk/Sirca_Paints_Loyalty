<div class="loader" *ngIf="loading_list">
  <div class="loding-logo">
    <mat-spinner></mat-spinner>
  </div>
</div>

<div class="main-container">
  <div class="fixed">
    <div class="middle-container">
      <div class="tabs-list gift-tab-list pl6">
        <h1>Master</h1>
        <div class="input-field">
          <input type="text" placeholder="Search..." [(ngModel)]="filter.search"
            (keyup.enter)="current_page=1;getCategoryList()">
          <i class="material-icons">search</i>
        </div>
      </div>
    </div>
  </div>

  <div class="container-outer tab-container">
    <div class="master-tab">
      <ul>
        <li routerLink="/main-catefory-list" routerLinkActive="active"><a>Main Category</a></li>
        <li routerLink="/sub-category-list" routerLinkActive="active"><a>Category</a></li>
        <li routerLink="/products-list" routerLinkActive="active"><a>Products</a></li>
        <!-- <li routerLink="/video-list" routerLinkActive="active"><a>Videos</a></li> -->
        <li routerLink="/login-banner-list" routerLinkActive="active"><a>Login Banner</a></li>
        <li routerLink="/registration-loyality" routerLinkActive="active"><a>Registration Loyality</a></li>
        <li routerLink="/referral-master" routerLinkActive="active"><a>Points Master</a></li>
        <li routerLink="/gift-master-list" routerLinkActive="active"><a>Gift Master</a></li>

        <!-- <li routerLink="/special-dis" routerLinkActive="active"><a>Special Discount/Extra Premium</a></li> -->
        <!-- <li routerLink="/plumber-meet-data" routerLinkActive="active"><a>Plumber Meet Data</a></li> -->

      </ul>
    </div>

    <div class="row">
      <div class="css-table hr-scroll-table left-right-15">
        <div class="sticky-header">
          <div class="header">
            <table>
              <tr>
                <th class="w50">&nbsp;</th>
                <th class="w100">Date Created</th>
                <th class="w130">Main Category</th>
                <th class="w130">Category</th>
                <th class="w160">Contractor Points</th>
                <th class="w160">Dealer Points</th>
                <th class="w150">Sales Team Points</th>
                <!-- <th class="w70 text-center">Group Type</th> -->
                <th class="w150 text-center">Architect Team Points</th>
                <!-- <th class="w100 text-center">Product Type</th> -->
                <!-- <th class="w100 text-center">Net Content</th> -->
                <!-- <th class="w120">Description</th> -->
                <!-- <th class="w90 no-padding">
                              <table>
                                  <tr>
                                      <th>Status</th>
                                  </tr>
                              </table>
                          </th> -->
                <th class="w200">
                  <table>
                    <tr>
                      <th>Action</th>
                    </tr>
                  </table>
                </th>
              </tr>

            </table>
          </div>

          <div class="header border-bott">
            <table>
              <tr>
                <th class="w50">&nbsp;</th>
                <th class="w100">
                  <!-- <div class="date-form">
                                  <i *ngIf="filter.date" class="material-icons" (click)="filter.date = '';getSubCategoryList() ">clear</i>
                                  
                                  <mat-form-field >
                                      <input placeholder="Date" [(ngModel)]="filter.date" (click)="openDatePicker(picker)"  name="date" matInput (dateChange)="getSubCategoryList()" [matDatepicker]="picker" readonly>
                                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                      <mat-datepicker #picker></mat-datepicker>
                                  </mat-form-field>
                              </div> -->
                </th>
                <th class="w130">
                  <!-- <div class="form-area">
                                  <div class="slect">
                                      <mat-form-field>
                                          <mat-label>Search</mat-label>
                                          <mat-select  name="main_category"  (selectionChange)="getSubCategoryList();getSubCategoryList()"  [(ngModel)]="filter.main_category" #main_category="ngModel" required>
                                              <mat-option  value=""> All </mat-option>
                                              <mat-option *ngFor="let val of ma_category" [value]="val.main_category"> {{val.main_category}} </mat-option>
                                          </mat-select>
                                      </mat-form-field>
                                  </div>
                              </div> -->

                </th>
                <th class="w130">
                  <!-- <div class="form-area">
                                  <div class="slect">
                                      <mat-form-field>
                                          <mat-label>Search</mat-label>
                                          <mat-select  name="category_name"  (selectionChange)="getSubCategoryList()"  [(ngModel)]="filter.category_name" #category_name="ngModel" required>
                                              <mat-option  value=""> All </mat-option>
                                              <mat-option *ngFor="let val of category" [value]="val.category_name"> {{val.category_name}} </mat-option>
                                          </mat-select>
                                      </mat-form-field>
                                  </div>
                              </div> -->

                </th>
                <th class="w160">
                  <!-- <div class="search-form">
                                  <input type="text" placeholder="Search" [(ngModel)]="filter.product_name"  (keyup.enter)="current_page = 1;getSubCategoryList()">
                                  <i class="material-icons">search</i>
                              </div> -->
                </th>
                <th class="w160">
                  <!-- <div class="search-form">
                                  <input type="text" placeholder="Search" [(ngModel)]="filter.product_code"  (keyup.enter)="current_page = 1;getSubCategoryList()">
                                  <i class="material-icons">search</i>
                              </div> -->
                </th>
                <th class="w150"></th>
                <!-- <th class="w70">
                              <div class="form-area">
                                  <div class="slect">
                                      <mat-form-field>
                                          <mat-label>Search</mat-label>
                                          <mat-select  [(ngModel)]="filter.group_type" name="group_type" #group_type="ngModel" (selectionChange)="getProductList()">
                                              <mat-option value="">All</mat-option>
                                              <mat-option value="PTMT">PTMT</mat-option>
                                              <mat-option value="Other">Others</mat-option>
                                          </mat-select>
                                      </mat-form-field>
                                  </div>
                              </div>
                          </th> -->
                <th class="w150">
                  <!-- <div class="form-area">
                                  <div class="slect">
                                      <mat-form-field>
                                          <mat-label>Search</mat-label>
                                          <mat-select  [(ngModel)]="filter.new_arrival" name="new_arrival" #new_arrival="ngModel" (selectionChange)="getSubCategoryList()">
                                              <mat-option value="">All</mat-option>
                                              <mat-option value="Yes">Yes</mat-option>
                                              <mat-option value="No">No</mat-option>
                                          </mat-select>
                                      </mat-form-field>
                                  </div>
                              </div> -->
                </th>
                <!-- <th class="w100" style="word-break: break-all;"></th>
                          <th class="w100" style="word-break: break-all;"></th>
                          <th class="w120" style="word-break: break-all;"></th> -->
                <!-- <th class="w90 no-padding">
                              <table>
                                  <tr>
                                      <th>
                                          <div class="form-area">
                                              <div class="slect">
                                                  <mat-form-field>
                                                      <mat-label>Search</mat-label>
                                                      <mat-select  [(ngModel)]="filter.status" name="status" #status="ngModel" (selectionChange)="getSubCategoryList()">
                                                          <mat-option value="">All</mat-option>
                                                          <mat-option value="Active">Active</mat-option>
                                                          <mat-option value="Deactive">Deactive</mat-option>
                                                      </mat-select>
                                                  </mat-form-field>
                                              </div>
                                          </div>
                                      </th>
                                  </tr>
                              </table>
                          </th> -->
                <th class="w200">
                  <table>
                    <tr>
                      <th>

                      </th>
                    </tr>
                  </table>
                </th>
              </tr>
            </table>
          </div>
        </div>

        <div class="table-container">
          <div class="table-body">
            <table>
              <tr *ngFor="let val of sub_categories; let i = index">
                <td class="w50">
                  <!-- <ng-container *ngFor="let image of val.image; let i=index"> -->
                  <img [src]="upload_url+val.actual_image_name"
                    (click)="openDialog(upload_url+val.actual_image_name,'test1')">
                  <!-- </ng-container> -->
                </td>
                <td class="w100">
                  <ng-container *ngIf="val.date_created  != '0000-00-00 00:00:00' ">
                    <div class="date-tr">
                      <p>{{val.date_created | date: 'dd MMM yyyy'}}</p>
                      <span> {{val.created_name}}</span>
                    </div>
                  </ng-container>
                </td>
                <td class="w130">{{val.main_category}}</td>
                <td class="w130">{{val.category_name}}</td>
                <td class="w160">{{val.contractor_points}}</td>
                <td class="w160">{{val.dealer_points }}</td>
                <td class="w150 text-center"> {{val.sales_team_points }}</td>
                <!-- <td class="w70">{{val.group_type}}</td> -->
                <!-- <td class="w70">{{val.new_arrival == 1 ? 'Yes' : 'No'}}</td> -->
                <td class="w150">{{val.architect_points}}</td>

                <!-- <td class="w100">{{val.net_content}}</td>
                      <td class="w100">{{val.product_type}}</td>
                      <td class="w120">{{val.desc}}</td> -->
                <!-- <td class="w90 no-padding active ">
                          <table>
                              <tr>
                                  
                                  <td class="no-border text-center td-flex">
                                      <mat-slide-toggle [name]="'status'+i" [(ngModel)]="val.newsStatus" (change)="updateStatus(i,$event)" ></mat-slide-toggle>
                                      
                                  </td>
                              </tr>
                          </table>
                      </td> -->
                <td class="w200 padding0">
                  <table>
                    <tr>
                      <td class="w200 no-border text-center td-flex padding0">
                        <button class="right" (click)="toggle1=!toggle1;editSubCategory(val.id,j,val.points)"><i
                            class="material-icons">edit</i></button>
                        <button class="cancel" *ngIf="val.product_count==0" (click)="deleteSubCategory(val.id)"><i
                            class="material-icons">delete_sweep</i></button>
                            <button mat-raised-button class="accent" style="margin-left: 20px;" (click)="toggle1 = !toggle1; addSubCategory(val.main_category)"><i
                              class="material-icons">add</i></button>
                        <!-- <button mat-raised-button class="accent" style="margin-left: 20px;"
                          [matMenuTriggerFor]="menu">Action</button>
                        <mat-menu #menu="matMenu">
                          <button mat-menu-item
                            (click)="toggle = !toggle; editCategory(val.main_category ); val.mainCategory = val.main_category">Edit
                            Category</button>
                          <button mat-menu-item (click)="toggle1 = !toggle1; addSubCategory(val.main_category)">Add Sub
                            Category</button>
                          <button mat-menu-item *ngIf="val.product_count==0"
                            (click)="deleteProduct(val.main_category)">Delete Category</button>
                        </mat-menu> -->
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>

            </table>
          </div>
        </div>
      </div>
    </div>

  </div>

</div>

<div class="side-main" [ngClass]="{'on' : toggle == true}">
  <div class="category-field" >
      <!-- f.form.valid &&  -->
      <form name="category" (ngSubmit)="savecategory(f)" #f="ngForm"  novalidate autocomplete="off">
          <div class="category-hadding">
              <h2>Add Main Category</h2>
              <i class="material-icons" (click)="toggle = !toggle">clear</i>
          </div>
          
          <div class="add-image">
              
              <div class="option-field">
                  <div class="control-field">
                      <mat-form-field class="cs-input">
                          <input matInput placeholder="Main Category" name="main_category" [(ngModel)]="category.main_category" #main_category="ngModel" required>
                      </mat-form-field>  
                  </div>
              </div>
              <!-- <div class="option-field">
                  <div class="control-field">
                      <mat-form-field class="cs-input">
                          <input type="number" matInput placeholder="Contractor Points"  name="contractor_points" [(ngModel)]="category.contractor_points" #contractor_points="ngModel" required>
                      </mat-form-field>  
                  </div>
              </div> -->
              
              <div class="uploade-image add-img-12">
                  <h4>Upload Image</h4>
                  <ul>
                      
                      <li class="add-bg-1">
                          <label>
                              <input type="file" (change)="onUploadChange1($event)" style="display:none;" accept=".png, .jpg, .jpeg"  />
                              <img  [src]="category.image" alt="" id="img">
                              <h4>Upload Image</h4>
                              
                              <span class="cancel-icon">
                                  <i class="material-icons crose-icon "  >clear</i>
                              </span>	
                          </label>
                      </li>
                  </ul>
              </div>
              
              <div class="save btn-save mt90" [ngClass]="{loading: savingData}" >
                  <button mat-button type="submit" [disabled]="save_button_disabled">SAVE</button>
              </div>
          </div>
      </form>
  </div>
  
  
  
  <div class="side-bg" (click)="toggle = !toggle"></div>
</div>

<div class="side-main" [ngClass]="{'on' : toggle1 == true}">
  <div class="category-field" >
      <form name="category" (ngSubmit)="f.form.valid && saveSubcategory(f)" #f="ngForm" novalidate autocomplete="off">
          <div class="category-hadding">
              <h2>Add Sub Category</h2>
              <i class="material-icons" (click)="toggle1 = !toggle1;clearData()">clear</i>
          </div>
          
          <div class="add-image">
              <div class="option-field">
                  <div class="control-field">
                      <mat-form-field class="cs-input">
                          <!-- <mat-select placeholder="Main Category" name="main_category"  [(ngModel)]="category.main_category" #main_category="ngModel"  >
                              <mat-option *ngFor="let val of ma_category" [value]="val.main_category"> {{val.main_category}} </mat-option>
                          </mat-select> -->
                          
                          <input matInput placeholder="Main Category Name" name="main_category" [(ngModel)] = "category.main_category" #main_category="ngModel" required>
                      </mat-form-field>
                  </div>
              </div>
              
              <div class="option-field">
                  <div class="control-field">
                      <mat-form-field class="cs-input">
                          <input matInput placeholder="Category Name" name="category_name" [(ngModel)] = "category.category_name" #category_name="ngModel" required>
                      </mat-form-field>  
                  </div>
              </div>

              <div class="option-field">
                  <div class="control-field">
                      <mat-form-field class="cs-input">
                          <input type="number" matInput placeholder="Contractor Points"  name="contractor_points" [(ngModel)]="category.contractor_points" #contractor_points="ngModel" required>
                      </mat-form-field>  
                  </div>
              </div>
              <div class="option-field">
                  <div class="control-field">
                      <mat-form-field class="cs-input">
                          <input type="number" matInput placeholder="Dealer Points"  name="dealer_points" [(ngModel)]="category.dealer_points" #dealer_points="ngModel" required>
                      </mat-form-field>  
                  </div>
              </div>
              <div class="option-field">
                  <div class="control-field">
                      <mat-form-field class="cs-input">
                          <input type="number" matInput placeholder="Sales Team Points"  name="sales_team_points" [(ngModel)]="category.sales_team_points" #sales_team_points="ngModel" required>
                      </mat-form-field>  
                  </div>
              </div>
              <div class="option-field">
                  <div class="control-field">
                      <mat-form-field class="cs-input">
                          <input type="number" matInput placeholder="Architect Points"  name="architect_points" [(ngModel)]="category.architect_points" #architect_points="ngModel" required>
                      </mat-form-field>  
                  </div>
              </div>
              
              <div class="uploade-image">
                  <h4>Upload Image</h4>
                  <ul>
                      <!-- <li *ngFor="let image of selected_image; let i=index" [ngClass]="{'active':category.profile_selected == i }">
                          <img [src]="image" >
                          <span class="cancel-icon">
                              <i class="material-icons check-icon" (click)="ProductProfile(i)">done</i>
                              <i class="material-icons crose-icon " (click)="deleteSubCategoryImage(i)">clear</i>
                          </span>									
                      </li> -->
                      <div *ngIf="image !=[]">
                      <li *ngFor="let data of image; let i=index" >
                          <img [src]="data.image">
                          <span class="cancel-icon">
                              <i class="material-icons check-icon" (click)="ProductProfile(i)">done</i>
                              <i class="material-icons crose-icon " (click)="deleteSubCategoryImage(i)">clear</i>
                          </span>									
                      </li>
                  </div>
                  <!-- <div *ngIf="image==[]">
                      <li *ngIf="category.image" >
                          <img [src]="category.image">
                          <span class="cancel-icon">
                              <i class="material-icons check-icon" (click)="ProductProfile(i)">done</i>
                              <i class="material-icons crose-icon " (click)="deleteSubCategoryImage(i)">clear</i>
                          </span>									
                      </li>
                  </div> -->
                      <li class="add-bg-1" >
                          <label>
                              <input type="file" (change)="onUploadChange($event)" style="display:none;" accept=".png, .jpg, .jpeg"  />

                              <img [src]="category.image" alt="" id="img">
                              <h4>Upload Image</h4>
                              
                             
                          </label>
                      </li>
                  </ul>
                  </div>
                  
                  <div class="save btn-save mt90" [ngClass]="{loading: savingData}">
                      <button mat-button [disabled]="save_button_disabled" >SAVE</button>
                     
                  </div>
              </div>
          </form>
      </div>
      
      
      
      <div class="side-bg" (click)="toggle1 = !toggle1"></div>
  </div>