<div class="loader" *ngIf="loading_list">
    <div class="loding-logo">
        <mat-spinner></mat-spinner>
    </div>
</div>
<div class="main-container">
    <div class="fixed">
        <div class="tab-header">
            <div class="tabs-list gift-tab-list pl15">
                <ul>
                    <li (click)="mode='available_primary';filter = {}; getAvailableCoupanList('')"
                    [ngClass]="{'active': mode == 'available_primary'}">
                    <a>
                        <p>AVAILABLE (Plumber Coupon)</p>
                        <span>{{avialable_coupon_count}}</span>
                    </a>
                </li>
                <li (click)="mode='scanned_primary';filter = {}; getScannedList('')"
                [ngClass]="{'active': mode == 'scanned_primary'}">
                <a>
                    <p>SCANNED (Plumber Coupon)</p>
                    <span>{{ sccaned_coupon_count}}</span>
                </a>
            </li>
            
            <li (click)="mode='available_secondary';filter = {};get_secondary_or_master_coupon_list('available_secondary')"
            [ngClass]="{'active': mode == 'available_secondary'}">
            <a>
                <p>AVAILABLE (Secondary)</p>
                <span>{{available_secondary_qr_code_coupon_count}}</span>
            </a>
        </li>
        <li (click)="mode='scanned_secondary';filter = {};get_secondary_or_master_coupon_list('scanned_secondary')"
        [ngClass]="{'active': mode == 'scanned_secondary'}">
        <a>
            <p>SCANNED (Secondary)</p>
            <span>{{scanned_secondary_qr_code_coupon_count}}</span>
        </a>
    </li>
    
    <li (click)="mode='available_master';filter = {};get_secondary_or_master_coupon_list('available_master')"
    [ngClass]="{'active': mode == 'available_master'}">
    <a>
        <p>AVAILABLE (Master)</p>
        <span>{{available_master_qr_code_coupon_count}}</span>
    </a>
</li>
<li (click)="mode='scanned_master';filter = {};get_secondary_or_master_coupon_list('scanned_master')"
[ngClass]="{'active': mode == 'scanned_master'}">
<a>
    <p>SCANNED (Master)</p>
    <span>{{scanned_master_qr_code_coupon_count}}</span>
</a>
</li>

</ul>
</div>

<div class="master-btn pr30">
    <button mat-button routerLink="/coupon-upload" routerLinkActive="active">COUPON GENERATE</button>
</div>
</div>


<span class="coupon_list_search inherit">
    
    
    <div class="top-pagination">
        <div class="date-filter-flex">
            <div class="date-form-filter">
                <mat-form-field appearance="outline">
                    <mat-label>Date From</mat-label>
                    <input placeholder="Date From" [(ngModel)]="filter.date_from"    (click)="openDatePicker(picker3)"  name="date_from" matInput
                    [matDatepicker]="picker3" readonly>
                    <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                    <mat-datepicker #picker3></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="date-form-filter">
                <mat-form-field appearance="outline">
                    <mat-label>Date To</mat-label>
                    <input placeholder="Date To" [(ngModel)]="filter.date_to" [max]="date1"  (click)="openDatePicker(picker4)"  name="date_to" matInput
                    [matDatepicker]="picker4" readonly>
                    <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                    <mat-datepicker #picker4></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="go_btn" *ngIf="mode  == 'available_primary' || mode  == 'scanned_primary'"  (click)="mode  == 'available_primary' ? getAvailableCoupanList('') : getScannedList('')" >GO</div>
            <div class="go_btn" *ngIf="mode  == 'available_secondary' || mode == 'available_master' || mode == 'scanned_master' || mode  == 'scanned_secondary'"  (click)="get_secondary_or_master_coupon_list(mode, '')" >GO</div>
            
        </div>
        <button mat-icon-button *ngIf="mode  == 'available_primary' || mode  == 'scanned_primary'"  (click)="mode  == 'available_primary' ? getAvailableCoupanList('refresh') : getScannedList('refresh')">
            <mat-icon aria-label="Example icon-button with a heart icon">sync</mat-icon>
        </button>

        <button mat-icon-button *ngIf="mode  == 'available_secondary' || mode == 'available_master' || mode == 'scanned_master' || mode  == 'scanned_secondary'"  (click)="get_secondary_or_master_coupon_list(mode, 'refresh')">
            <mat-icon aria-label="Example icon-button with a heart icon">sync</mat-icon>
        </button>
        
        <div class="input-field pl0" *ngIf="mode == 'available_primary' || mode == 'scanned_primary'">
            <input class="filter_search" type="text" placeholder="Search" [(ngModel)]="filter.search"
            (keyup.enter)="current_page = 1; (mode == 'available_primary' && !(!filtering && coupon.length == 0 ) ?  getAvailableCoupanList('') : (mode == 'scanned_primary' && !(!filtering && scanned_coupon.length == 0) ? getScannedList(''):''))">
            <i class="material-icons">
                search
            </i>
        </div>
        
        <div class="left-auto">
            <ul *ngIf="mode == 'available_primary' && !(!filtering && coupon.length == 0 )">
                <li (click)="exportAvailableCouponList()">
                    <p class="w150">Pages {{ current_page }} of {{ last_page }}</p>
                </li>
                <li><button mat-button class="left-btn" (click)='redirect_previous1()'><i
                    class="material-icons">keyboard_arrow_left</i></button></li>
                    <li><input type="text" placeholder="GO TO" [(ngModel)]="current_page"
                        (keyup.enter)="getAvailableCoupanList('')"></li>
                        <li><button mat-button class="right-btn" (click)='redirect_next1()'><i
                            class="material-icons">keyboard_arrow_right</i></button></li>
                        </ul>
                        
                        <ul *ngIf="mode == 'scanned_primary' && !(!filtering && scanned_coupon.length == 0 )">
                            <li>
                                <p class="w150" (click)="exportScannedCouponList()">Pages {{ current_page }} of {{ last_page }}
                                </p>
                            </li>
                            <li><button mat-button class="left-btn" (click)='redirect_previous2()'><i
                                class="material-icons">keyboard_arrow_left</i></button></li>
                                <li><input type="text" placeholder="GO TO" [(ngModel)]="current_page"
                                    (keyup.enter)="getScannedList('')"></li>
                                    <li><button mat-button class="right-btn" (click)='redirect_next2()'><i
                                        class="material-icons">keyboard_arrow_right</i></button></li>
                                    </ul>
                                    
                                    
                                    <ng-container *ngIf="mode != 'scanned_primary' && mode != 'available_primary'">
                                        <ul>
                                            <li>
                                                <p (click)="get_secondary_or_master_coupon_list(mode ,'')">Pages {{ mode ==
                                                    'available_secondary' ? available_secondary_qr_code_list.current_page : (mode ==
                                                    'scanned_secondary' ? scanned_secondary_qr_code_list.current_page : (mode ==
                                                    'available_master' ? available_master_qr_code_list.current_page :
                                                    scanned_master_qr_code_list.current_page ))}} of {{ mode == 'available_secondary' ?
                                                    available_secondary_qr_code_list.last_page : (mode == 'scanned_secondary' ?
                                                    scanned_secondary_qr_code_list.last_page : (mode == 'available_master' ?
                                                    available_master_qr_code_list.last_page : scanned_master_qr_code_list.last_page ))}}</p>
                                                </li>
                                                <li><button mat-button class="left-btn"
                                                    (click)="  mode == 'available_secondary' ? available_secondary_qr_code_list.current_page = available_secondary_qr_code_list.current_page - 1 : (mode == 'scanned_secondary' ? scanned_secondary_qr_code_list.current_page = scanned_secondary_qr_code_list.current_page - 1 : (mode == 'available_master' ? available_master_qr_code_list.current_page = available_master_qr_code_list.current_page - 1 : scanned_master_qr_code_list.current_page = scanned_master_qr_code_list.current_page - 1 )); get_secondary_or_master_coupon_list(mode ,'')"
                                                    [disabled]="  mode == 'available_secondary' ? available_secondary_qr_code_list.current_page == 1 : (mode == 'scanned_secondary' ? scanned_secondary_qr_code_list.current_page == 1 : (mode == 'available_master' ? available_master_qr_code_list.current_page == 1 : scanned_master_qr_code_list.current_page == 1 ))"><i
                                                    class="material-icons">keyboard_arrow_left</i></button></li>
                                                    
                                                    <li *ngIf="mode == 'available_secondary'"><input type="text" placeholder="GO TO"
                                                        [(ngModel)]="available_secondary_qr_code_list.current_page"
                                                        (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')"></li>
                                                        <li *ngIf="mode == 'scanned_secondary'"><input type="text" placeholder="GO TO"
                                                            [(ngModel)]="scanned_secondary_qr_code_list.current_page"
                                                            (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')"></li>
                                                            <li *ngIf="mode == 'available_master'"><input type="text" placeholder="GO TO"
                                                                [(ngModel)]="available_master_qr_code_list.current_page"
                                                                (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')"></li>
                                                                <li *ngIf="mode == 'scanned_master'"><input type="text" placeholder="GO TO"
                                                                    [(ngModel)]="scanned_master_qr_code_list.current_page"
                                                                    (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')"></li>
                                                                    
                                                                    <li><button mat-button class="right-btn"
                                                                        (click)="  mode == 'available_secondary' ? available_secondary_qr_code_list.current_page = available_secondary_qr_code_list.current_page + 1 : (mode == 'scanned_secondary' ? scanned_secondary_qr_code_list.current_page = scanned_secondary_qr_code_list.current_page + 1 : (mode == 'available_master' ? available_master_qr_code_list.current_page = available_master_qr_code_list.current_page + 1 : scanned_master_qr_code_list.current_page = scanned_master_qr_code_list.current_page + 1 )); get_secondary_or_master_coupon_list(mode ,'')"
                                                                        [disabled]="  mode == 'available_secondary' ? available_secondary_qr_code_list.current_page == available_secondary_qr_code_list.last_page : (mode == 'scanned_secondary' ? scanned_secondary_qr_code_list.current_page == scanned_secondary_qr_code_list.last_page : (mode == 'available_master' ? available_master_qr_code_list.current_page == available_master_qr_code_list.last_page : scanned_master_qr_code_list.current_page == scanned_master_qr_code_list.last_page ))"><i
                                                                        class="material-icons">keyboard_arrow_right</i></button></li>
                                                                        
                                                                    </ul>
                                                                </ng-container>
                                                            </div>
                                                            
                                                            
                                                        </div>
                                                        
                                                        <div class="css-table" *ngIf="mode == 'available_primary' && !(!filtering && coupon.length == 0 )  ">
                                                            <div class="sticky-header">
                                                                <div class="header">
                                                                    <table>
                                                                        <tr>
                                                                            <th class="w50 border-right text-center">S.No.</th>
                                                                            <th class="w250">Date / Created by</th>
                                                                            <th>Coupon Code </th>
                                                                            <th class="w200 text-center">Coupon Group Type </th>
                                                                            <th class="w200 text-center ">Points</th>
                                                                            <th class="w150 text-center ">Assign</th>
                                                                            <th class="w150 text-center ">Delete</th>
                                                                        </tr>
                                                                        
                                                                    </table>
                                                                </div>
                                                                <div class="header border-bott">
                                                                    <table>
                                                                        <tr>
                                                                            <th class="w50 border-right ">&nbsp;</th>
                                                                            <th class="w250">
                                                                                <div class="vaild-into">
                                                                                    <div class="date-form wp-21 mr10">
                                                                                        <i *ngIf="filter.date" class="material-icons"
                                                                                        (click)="filter.date = '';getAvailableCoupanList('') ">clear</i>
                                                                                        
                                                                                        <mat-form-field>
                                                                                            <input matInput placeholder=" Date" [(ngModel)]="filter.date"
                                                                                            (click)="openDatePicker(picker1)" name="date" matInput
                                                                                            (dateChange)="getAvailableCoupanList('')" [matDatepicker]="picker1"
                                                                                            readonly>
                                                                                            <mat-datepicker-toggle matSuffix [for]="picker1">
                                                                                            </mat-datepicker-toggle>
                                                                                            <mat-datepicker #picker1></mat-datepicker>
                                                                                        </mat-form-field>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            
                                                                            <th>
                                                                                <div class="form-area wp-21">
                                                                                    <div class="search-form">
                                                                                        <input type="text" placeholder="Search" [(ngModel)]="filter.coupon_code"
                                                                                        (keyup.enter)="current_page = 1;getAvailableCoupanList('')">
                                                                                        <i class="material-icons">search</i>
                                                                                    </div>
                                                                                </div>
                                                                            </th>
                                                                            
                                                                            <!-- Coupon Group Type -->
                                                                            <th class="w200">
                                                                                <div class="form-area wp-21" *ngIf="db.datauser.id != '143' && db.datauser.id != '144'">
                                                                                    <div class="slect">
                                                                                        
                                                                                        <mat-form-field>
                                                                                            <!-- <mat-label style="font-size: 10px; letter-spacing: 2px;">Select</mat-label> -->
                                                                                            <mat-select [(ngModel)]="filter.coupon_group_type"
                                                                                            name="coupon_group_type" #coupon_group_type="ngModel"
                                                                                            (selectionChange)="getAvailableCoupanList('')('')">
                                                                                            <mat-option value="All">All</mat-option>
                                                                                            <mat-option value="PTMT">PTMT</mat-option>
                                                                                            <mat-option value="Others">Others</mat-option>
                                                                                        </mat-select>
                                                                                    </mat-form-field>
                                                                                </div>
                                                                            </div> 
                                                                        </th>
                                                                        
                                                                        <th class="w200">
                                                                            <div class="vaild-into">
                                                                                <div class="form-area  mr10">
                                                                                    <div class="search-form">
                                                                                        <input type="text" placeholder="Search" [(ngModel)]="filter.points"
                                                                                        (keyup.enter)="current_page = 1;getAvailableCoupanList('')">
                                                                                        <i class="material-icons">search</i>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                            </div>
                                                                        </th>
                                                                        
                                                                        <th class="w150 text-center "></th>
                                                                        
                                                                        
                                                                        <th class="w150">
                                                                            <!-- <div class="vaild-into">
                                                                                <div class="form-area">
                                                                                    <button mat-button class="go" (click)="getAvailableCoupanList('')">Go</button>
                                                                                </div>
                                                                            </div> -->
                                                                        </th>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                        </div>
                                                        
                                                    </div>
                                                </span>
                                                
                                                <div class="css-table " *ngIf="mode == 'scanned_primary' && !(!filtering && scanned_coupon.length == 0 )  ">
                                                    <div class="sticky-header">
                                                        <div class="header">
                                                            <table>
                                                                <tr>
                                                                    <th class="w50 border-right text-center">S.No.</th>
                                                                    <!-- <th class="w150">Date / Created by {{mode}}</th>
                                                                        <th class="w180" >Coupon Code {{filtering}}</th>
                                                                        <th class="w200">Used Date & Used By {{scanned_coupon.length}}</th> -->
                                                                        <th class="w150">Date / Created by</th>
                                                                        <th class="w180">Coupon Code</th>
                                                                        <th class="w100">Coupon Group Type</th>
                                                                        <th class="w200">Used Date & Used By</th>
                                                                        <th class="w100">Scan From</th>
                                                                        <th class="w110">Mobile No.</th>
                                                                        <th class="w80 text-center ">Points</th>
                                                                    </tr>
                                                                    
                                                                </table>
                                                            </div>
                                                            <div class="header border-bott">
                                                                <table>
                                                                    <tr>
                                                                        <th class="w50 border-right ">&nbsp;</th>
                                                                        <th class="w150">
                                                                            <div class="vaild-into">
                                                                                <div class="date-form  mr10">
                                                                                    <i *ngIf="filter.date" class="material-icons"
                                                                                    (click)="filter.date = '';getScannedList('') ">clear</i>
                                                                                    
                                                                                    <mat-form-field>
                                                                                        <input matInput placeholder=" Date" [(ngModel)]="filter.date"
                                                                                        (click)="openDatePicker(picker3)" name="date" matInput
                                                                                        (dateChange)="getScannedList('')" [matDatepicker]="picker3" readonly>
                                                                                        <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                                                                                        <mat-datepicker #picker3></mat-datepicker>
                                                                                    </mat-form-field>
                                                                                </div>
                                                                                
                                                                            </div>
                                                                        </th>
                                                                        <th class="w180">
                                                                            <div class="form-area wp-21">
                                                                                <div class="search-form">
                                                                                    <input type="text" placeholder="Search" [(ngModel)]="filter.coupon_code"
                                                                                    (keyup.enter)="current_page = 1;getScannedList('')">
                                                                                    <i class="material-icons">search</i>
                                                                                </div>
                                                                            </div>
                                                                        </th>
                                                                        
                                                                        <!-- Coupon Group Type -->
                                                                        <th class="w100">
                                                                            <div class="form-area wp-21" *ngIf="db.datauser.id != '143' && db.datauser.id != '144'">
                                                                                <div class="slect">
                                                                                    <mat-form-field>
                                                                                        <mat-select [(ngModel)]="filter.coupon_group_type" name="coupon_group_type"
                                                                                        #coupon_group_type="ngModel" (selectionChange)="getScannedList('')">
                                                                                        <mat-option value="All">All</mat-option>
                                                                                        <mat-option value="PTMT">PTMT</mat-option>
                                                                                        <mat-option value="Others">Others</mat-option>
                                                                                    </mat-select>
                                                                                </mat-form-field>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        
                                                                    </th>
                                                                    
                                                                    
                                                                    
                                                                    <th class="w200">
                                                                        <div class="vaild-into">
                                                                            <div class="date-form wp-21 mr10">
                                                                                <i *ngIf="filter.scan_date" class="material-icons"
                                                                                (click)="filter.scan_date = '';getScannedList('') ">clear</i>
                                                                                
                                                                                <mat-form-field>
                                                                                    <input matInput placeholder=" Search" [(ngModel)]="filter.scan_date"
                                                                                    (click)="openDatePicker(picker5)" name="scan_date" matInput
                                                                                    (dateChange)="getScannedList('')" [matDatepicker]="picker5" readonly>
                                                                                    <mat-datepicker-toggle matSuffix [for]="picker5"></mat-datepicker-toggle>
                                                                                    <mat-datepicker #picker5></mat-datepicker>
                                                                                </mat-form-field>
                                                                            </div>
                                                                            <div class="form-area wp-21">
                                                                                <div class="search-form">
                                                                                    <input type="text" placeholder="Search" [(ngModel)]="filter.used_by"
                                                                                    (keyup.enter)="current_page = 1;getScannedList('')">
                                                                                    <i class="material-icons">search</i>
                                                                                </div>
                                                                            </div>
                                                                            
                                                                            
                                                                        </div>
                                                                    </th>
                                                                    
                                                                    <th class="w100"></th>
                                                                    
                                                                    <th class="w110">
                                                                        <div class="form-area wp-21">
                                                                            <div class="search-form">
                                                                                <input type="text" placeholder="Search" [(ngModel)]="filter.mobile"
                                                                                (keyup.enter)="current_page = 1;getScannedList('')">
                                                                                <i class="material-icons">search</i>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th class="w80">
                                                                        <div class="vaild-into">
                                                                            <div class="form-area wp-21">
                                                                                <div class="search-form">
                                                                                    <input type="text" [(ngModel)]="filter.points"
                                                                                    (keyup.enter)="current_page = 1;getScannedList('')">
                                                                                    <i class="material-icons">search</i>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-area">
                                                                                <button mat-button class="go" (click)="getScannedList('')">Go</button>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    
                                                    
                                                </div>
                                                
                                                <!-- <div class="css-table"  *ngIf="mode == 'available_secondary'|| mode == 'scanned_secondary'">
                                                    <div class="sticky-header">
                                                        <div class="header">
                                                            <table >
                                                                <tr>
                                                                    <th class="w50 border-right text-center">S.No.</th>
                                                                    <th class="w150">Date</th>
                                                                    <th>Product Name</th>
                                                                    <th class="w180 text-center ">Secondary Packing Code</th>
                                                                    <th *ngIf="mode == 'scanned_secondary'" class="w180">Master Packing Code</th>   
                                                                    <th *ngIf="mode == 'scanned_secondary'" class="w150 text-center ">Scan Date</th>
                                                                    <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">Scan By</th>
                                                                    <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">Order ID</th>
                                                                    <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">Party Name</th>
                                                                    <th *ngIf="mode == 'available_secondary'" class="w180 text-center ">Action</th>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                        
                                                        <div class="header border-bott">
                                                            <table>
                                                                <tr>
                                                                    <th class="w50 border-right text-center"></th>
                                                                    <th class="w150">
                                                                        <div class="vaild-into">
                                                                            <div class="date-form wp-21 mr10">
                                                                                <mat-form-field>
                                                                                    <input matInput placeholder=" Date" [(ngModel)]="filter.date_created" (click)="openDatePicker(picker1)" name="date" matInput (dateChange)="get_secondary_or_master_coupon_list(mode ,'')" [matDatepicker]="picker1" readonly>
                                                                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                                                                    <mat-datepicker #picker1></mat-datepicker>
                                                                                </mat-form-field>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th>
                                                                        <div class="form-area wp-21">
                                                                            <div class="search-form">
                                                                                <input type="text" placeholder="Search" [(ngModel)]="filter.product_name"  (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                <i class="material-icons">search</i>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th class="w180 text-center ">
                                                                        <div class="form-area wp-21">
                                                                            <div class="search-form">
                                                                                <input type="text" placeholder="Search" [(ngModel)]="filter.secondary_qr_code"  (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                <i class="material-icons">search</i>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th *ngIf="mode == 'scanned_secondary'" class="w180">
                                                                        <div class="form-area wp-21">
                                                                            <div class="search-form">
                                                                                <input type="text" placeholder="Search" [(ngModel)]="filter.master_box_qr_code"  (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                <i class="material-icons">search</i>
                                                                            </div>
                                                                        </div>
                                                                    </th>   
                                                                    <th *ngIf="mode == 'scanned_secondary'" class="w150 text-center ">
                                                                        <div class="vaild-into">
                                                                            <div class="date-form wp-21 mr10">
                                                                                <mat-form-field>
                                                                                    <input matInput placeholder=" Date" [(ngModel)]="filter.scanned_on" (click)="openDatePicker(scanned_on_picker)" name="scanned_on" matInput (dateChange)="get_secondary_or_master_coupon_list(mode ,'')" [matDatepicker]="scanned_on_picker" readonly>
                                                                                    <mat-datepicker-toggle matSuffix [for]="scanned_on_picker"></mat-datepicker-toggle>
                                                                                    <mat-datepicker #scanned_on_picker></mat-datepicker>
                                                                                </mat-form-field>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">
                                                                        <div class="form-area wp-21">
                                                                            <div class="search-form">
                                                                                <input type="text" placeholder="Search" [(ngModel)]="filter.scanned_by_name"  (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                <i class="material-icons">search</i>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">
                                                                        <div class="form-area wp-21">
                                                                            <div class="search-form">
                                                                                <input type="text" placeholder="Search" [(ngModel)]="filter.order_id"  (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                <i class="material-icons">search</i>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">
                                                                        <div class="form-area wp-21">
                                                                            <div class="search-form">
                                                                                <input type="text" placeholder="Search" [(ngModel)]="filter.assigned_to_dr_named"  (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                <i class="material-icons">search</i>
                                                                            </div>
                                                                        </div>
                                                                    </th>
                                                                    <th *ngIf="mode == 'available_secondary'" class="w180 text-center "></th>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                        
                                                    </div>
                                                    
                                                </div>  -->
                                                
                                                
                                                
                                            </div>
                                            
                                            <div class="css-table" *ngIf="mode == 'available_primary' && coupon.length">
                                                <div class="table-container">
                                                    <div class="table-body">
                                                        <table>
                                                            <tr class="arject" *ngFor="let val of coupon; let i = index">
                                                                <td class="w50 text-center">{{ i + 1 }}</td>
                                                                <td class="w250">
                                                                    <ng-container *ngIf="val.date_created  != '0000-00-00 00:00:00' "> {{val.date_created |
                                                                        date: 'dd MMM yyyy'}} / </ng-container>{{val.created_name}}
                                                                    </td>
                                                                    <td> {{val.coupon_code}}</td>
                                                                    <td class="w200">{{val.coupon_group_type}} </td>
                                                                    <td class="w200 text-center"><span class="back-bg">{{val.coupon_value}}</span>
                                                                        
                                                                        <!-- <div class="over-sec-edit lar-h12">
                                                                            <i class="material-icons" (click)="assign_code_to_plumber(val.coupon_code)" >edit</i>
                                                                        </div> 
                                                                    -->
                                                                </td>
                                                                
                                                                <td class="w150 Assign text-center text-add">
                                                                    <a *ngIf="this.db.datauser.id==1" (click)="assign_code_to_plumber(val.coupon_code)"><i
                                                                        class="material-icons">edit</i>Assign</a>
                                                                    </td>
                                                                    
                                                                    <td class="w150 Reject text-center text-add">
                                                                        <!-- <i class="material-icons deactive"  (click)="deleteCoupon(val.id)" >delete_sweep</i></td>       -->
                                                                        <!-- <a >Delete</a> -->
                                                                        <a *ngIf="this.db.datauser.id==1" (click)="deleteCoupon(val.id)"><i
                                                                            class="material-icons deactive">delete_sweep</i>delete</a>
                                                                        </tr>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        
                                                        <div class="css-table" *ngIf="mode == 'scanned_primary' && scanned_coupon.length">
                                                            <div class="table-container">
                                                                <div class="table-body">
                                                                    <table>
                                                                        <tr class="arject" *ngFor="let val of scanned_coupon; let i = index">
                                                                            <td class="w50 text-center">{{ i + 1 }}</td>
                                                                            <td class="w150">
                                                                                <ng-container *ngIf="val.date_created  != '0000-00-00 00:00:00' "> {{val.date_created |
                                                                                    date: 'dd MMM yyyy'}} / </ng-container>{{val.created_name}}
                                                                                </td>
                                                                                <td class="w180"> {{val.coupon_code}}</td>
                                                                                <td class="w100"> {{val.coupon_group_type}}</td>
                                                                                <td class="w200">
                                                                                    <p>{{val.scan_date | date : 'dd MMM yyyy'}} / <a class="blue"
                                                                                        routerLink="/karigar-detail/{{val.karigar_id | crypt}}"
                                                                                        routerLinkActive="active">{{val.first_name | titlecase }} {{val.last_name |
                                                                                            titlecase }}</a></p>
                                                                                        </td>
                                                                                        <td class="w100">{{val.assign_coupon_by == '0' ? 'MOBILE' : 'LOYALTY'}}</td>
                                                                                        <td class="w110">{{val.mobile_no}}</td>
                                                                                        <td class="w80 text-center"><span class="back-bg">{{val.coupon_value}}</span></td>
                                                                                    </tr>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    
                                                                    
                                                                    <div class="scroll-table" *ngIf="mode == 'available_secondary'|| mode == 'scanned_secondary'">
                                                                        <div class="css-table" [ngClass]="mode == 'scanned_secondary' ? 'min_content' : ''">
                                                                            <div class="sticky-header">
                                                                                <div class="header">
                                                                                    <table>
                                                                                        <tr>
                                                                                            <th class="w50 border-right text-center">S.No.</th>
                                                                                            <th class="w150">Date</th>
                                                                                            <th class="" [ngClass]="mode == 'scanned_secondary'? 'w400':'w400'">Product Name</th>
                                                                                            <th class="w180 text-center ">Secondary Packing Code</th>
                                                                                            <th class="w100 text-center ">Coupon Group Type</th>
                                                                                            <th *ngIf="mode == 'scanned_secondary'" class="w180">Master Packing Code</th>
                                                                                            <th *ngIf="mode == 'scanned_secondary'" class="w150 text-center ">Scan Date</th>
                                                                                            <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">Scan By</th>
                                                                                            <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">Order ID</th>
                                                                                            <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">Party Name</th>
                                                                                            <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">Warehouse</th>
                                                                                            <th *ngIf="mode == 'available_secondary'" class="w180 text-center ">Action</th>
                                                                                        </tr>
                                                                                    </table>
                                                                                </div>
                                                                                
                                                                                <div class="header border-bott">
                                                                                    <table>
                                                                                        <tr>
                                                                                            <th class="w50 border-right text-center"></th>
                                                                                            <th class="w150">
                                                                                                <div class="vaild-into">
                                                                                                    <div class="date-form wp-21 mr10">
                                                                                                        <!-- <i *ngIf="filter.date" class="material-icons" (click)="filter.date = '';get_secondary_or_master_coupon_list(mode ,'') ">clear</i> -->
                                                                                                        <mat-form-field>
                                                                                                            <input matInput placeholder=" Date" [(ngModel)]="filter.date_created"
                                                                                                            (click)="openDatePicker(picker1)" name="date" matInput
                                                                                                            (dateChange)="get_secondary_or_master_coupon_list(mode ,'')"
                                                                                                            [matDatepicker]="picker1" readonly>
                                                                                                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                                                                                            <mat-datepicker #picker1></mat-datepicker>
                                                                                                        </mat-form-field>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </th>
                                                                                            <th class="" [ngClass]="mode == 'scanned_secondary'? 'w400':'w400'">
                                                                                                <div class="form-area wp-21">
                                                                                                    <div class="search-form">
                                                                                                        <input type="text" placeholder="Search" [(ngModel)]="filter.product_name"
                                                                                                        (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                                        <i class="material-icons">search</i>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </th>
                                                                                            <th class="w180 text-center ">
                                                                                                <div class="form-area wp-21">
                                                                                                    <div class="search-form">
                                                                                                        <input type="text" placeholder="Search" [(ngModel)]="filter.secondary_qr_code"
                                                                                                        (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                                        <i class="material-icons">search</i>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </th>
                                                                                            
                                                                                            <!-- Coupon Group Type -->
                                                                                            <th class="w100 text-center">
                                                                                                <div class="form-area wp-21" *ngIf="db.datauser.id != '143' && db.datauser.id != '144'">
                                                                                                    <div class="slect">
                                                                                                        <mat-form-field>
                                                                                                            <mat-select [(ngModel)]="filter.coupon_group_type" name="coupon_group_type"
                                                                                                            #coupon_group_type="ngModel" (selectionChange)="getScannedList('')">
                                                                                                            <mat-option value="All">All</mat-option>
                                                                                                            <mat-option value="PTMT">PTMT</mat-option>
                                                                                                            <mat-option value="Others">Others</mat-option>
                                                                                                        </mat-select>
                                                                                                    </mat-form-field>
                                                                                                </div>
                                                                                            </div>
                                                                                            
                                                                                        </th>
                                                                                        
                                                                                        <th *ngIf="mode == 'scanned_secondary'" class="w180">
                                                                                            <div class="form-area wp-21">
                                                                                                <div class="search-form">
                                                                                                    <input type="text" placeholder="Search" [(ngModel)]="filter.master_box_qr_code"
                                                                                                    (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                                    <i class="material-icons">search</i>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th *ngIf="mode == 'scanned_secondary'" class="w150 text-center ">
                                                                                            <div class="vaild-into">
                                                                                                <div class="date-form wp-21 mr10">
                                                                                                    <!-- <i *ngIf="filter.date" class="material-icons" (click)="filter.date = '';get_secondary_or_master_coupon_list(mode ,'') ">clear</i> -->
                                                                                                    <mat-form-field>
                                                                                                        <input matInput placeholder=" Date" [(ngModel)]="filter.scanned_on"
                                                                                                        (click)="openDatePicker(scanned_on_picker)" name="scanned_on" matInput
                                                                                                        (dateChange)="get_secondary_or_master_coupon_list(mode ,'')"
                                                                                                        [matDatepicker]="scanned_on_picker" readonly>
                                                                                                        <mat-datepicker-toggle matSuffix [for]="scanned_on_picker">
                                                                                                        </mat-datepicker-toggle>
                                                                                                        <mat-datepicker #scanned_on_picker></mat-datepicker>
                                                                                                    </mat-form-field>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">
                                                                                            <div class="form-area wp-21">
                                                                                                <div class="search-form">
                                                                                                    <input type="text" placeholder="Search" [(ngModel)]="filter.scanned_by_name"
                                                                                                    (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                                    <i class="material-icons">search</i>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">
                                                                                            <div class="form-area wp-21">
                                                                                                <div class="search-form">
                                                                                                    <input type="text" placeholder="Search" [(ngModel)]="filter.order_id"
                                                                                                    (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                                    <i class="material-icons">search</i>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">
                                                                                            <div class="form-area wp-21">
                                                                                                <div class="search-form">
                                                                                                    <input type="text" placeholder="Search"
                                                                                                    [(ngModel)]="filter.assigned_to_dr_named"
                                                                                                    (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                                    <i class="material-icons">search</i>
                                                                                                </div>
                                                                                            </div>
                                                                                        </th>
                                                                                        <th *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">
                                                                                            <!-- <div class="form-area wp-21">
                                                                                                <div class="search-form">
                                                                                                    <input type="text" placeholder="Search" [(ngModel)]="filter.assigned_to_dr_named"  (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                                    <i class="material-icons">search</i>
                                                                                                </div>
                                                                                            </div> -->
                                                                                        </th>
                                                                                        <th *ngIf="mode == 'available_secondary'" class="w180 text-center "></th>
                                                                                    </tr>
                                                                                </table>
                                                                            </div>
                                                                            
                                                                        </div>
                                                                    </div>
                                                                    
                                                                    <div class="css-table" [ngClass]="mode == 'scanned_secondary' ? 'min_content' : ''">
                                                                        <div class="table-container">
                                                                            <div class="table-body">
                                                                                <table>
                                                                                    <tr class="arject"
                                                                                    *ngFor="let coupon_data of (mode == 'scanned_secondary' ? scanned_secondary_qr_code_list.data : available_secondary_qr_code_list.data); let i = index">
                                                                                    <td class="w50 text-center">{{ scanned_secondary_qr_code_list.from+i }}</td>
                                                                                    <td class="w150">{{coupon_data.date_created | date : 'd MMM, y'}}</td>
                                                                                    <td class="" [ngClass]="mode == 'scanned_secondary'? 'w400':'w400'">
                                                                                        {{(coupon_data.product_name | titlecase) +' - '+ (coupon_data.material_code)}}</td>
                                                                                        <td class="w180 text-center"
                                                                                        [ngClass]="coupon_data.master_box_qr_code_id =='destroy' ? 'stock-alert' : ''">
                                                                                        {{coupon_data.secondary_qr_code}}</td>
                                                                                        <td class="w100 text-center">{{coupon_data.coupon_group_type}}</td>
                                                                                        
                                                                                        <td *ngIf="mode == 'scanned_secondary'" class="w180"> {{coupon_data.master_box_qr_code &&
                                                                                            coupon_data.master_box_qr_code!= ''?coupon_data.master_box_qr_code:'--' }}</td>
                                                                                            <td *ngIf="mode == 'scanned_secondary'" class="w150 text-center ">{{coupon_data.scanned_on
                                                                                                && coupon_data.scanned_on!= '' && coupon_data.scanned_on != '0000-00-00 00:00:00' ?
                                                                                                (coupon_data.scanned_on | date : 'd MMM, y') : '--'}}</td>
                                                                                                <td *ngIf="mode == 'scanned_secondary'" class="w180 text-center">
                                                                                                    {{coupon_data.scanned_by_name}}</td>
                                                                                                    <td *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">{{coupon_data.order_id &&
                                                                                                        coupon_data.order_id!='' ? coupon_data.order_id : '--'}}</td>
                                                                                                        <td *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">
                                                                                                            {{coupon_data.assigned_to_dr_named && coupon_data.assigned_to_dr_named!= '' ?
                                                                                                            coupon_data.assigned_to_dr_named : '--'}}</td>
                                                                                                            <td *ngIf="mode == 'scanned_secondary'" class="w180 text-center ">
                                                                                                                {{coupon_data.ware_house_name && coupon_data.ware_house_name!= '' &&
                                                                                                                coupon_data.ware_house_name!= null ? coupon_data.ware_house_name : '--'}}</td>
                                                                                                                
                                                                                                                <td *ngIf="mode == 'available_secondary'" class="w180 Reject text-center text-add ">
                                                                                                                    <a (click)="delete_secondary_or_master_available_coupon(coupon_data.id,mode)"><i
                                                                                                                        class="material-icons deactive">delete_sweep</i>delete</a>
                                                                                                                    </td>
                                                                                                                </tr>
                                                                                                            </table>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            
                                                                                            
                                                                                            <div class="scroll-table" *ngIf="mode == 'available_master'|| mode == 'scanned_master'">
                                                                                                <div class="css-table" [ngClass]="mode == 'scanned_master' ? 'min_content' : ''">
                                                                                                    <div class="sticky-header">
                                                                                                        <div class="header">
                                                                                                            <table>
                                                                                                                <tr>
                                                                                                                    <th class="w40 text-center"></th>
                                                                                                                    <th class="w150">Date Created</th>
                                                                                                                    <th class="w150">Created By</th>
                                                                                                                    <th class="w170 text-center">Master Code</th>
                                                                                                                    <th class="w100 text-center">Coupon Group Type</th>
                                                                                                                    
                                                                                                                    <th *ngIf="mode == 'scanned_master'" class="w150">Packed Date</th>
                                                                                                                    <th *ngIf="mode == 'scanned_master'" class="w200">Packed By</th>
                                                                                                                    
                                                                                                                    <th *ngIf="mode == 'scanned_master'" class="w150 text-center">Total Item (Master)</th>
                                                                                                                    <th *ngIf="mode == 'scanned_master'" class="w130 text-center">Total Box Packing</th>
                                                                                                                    
                                                                                                                    <th *ngIf="mode == 'scanned_master'" class="w130 text-center">Order ID</th>
                                                                                                                    <th *ngIf="mode == 'scanned_master'" class="w130 text-center">Dispatch Date</th>
                                                                                                                    <th *ngIf="mode == 'scanned_master'" class="w130 text-center">Dispatch By</th>
                                                                                                                    <th *ngIf="mode == 'scanned_master'" class="w130 text-center">Party Name</th>
                                                                                                                    <th *ngIf="mode == 'scanned_master' && false" class="w130 text-center">Remark</th>
                                                                                                                    
                                                                                                                    <th *ngIf="mode == 'scanned_master'" class="w130 text-center">Warehouse</th>
                                                                                                                    
                                                                                                                    <!-- <th *ngIf="mode == 'scanned_master'" class="w130 text-center">Reopen Date</th> -->
                                                                                                                    <!-- <th *ngIf="mode == 'scanned_master'" class="w130 text-center">Reopen By</th> -->
                                                                                                                    <th *ngIf="mode == 'scanned_master'" class="w130 text-center">Open Date</th>
                                                                                                                    <th *ngIf="mode == 'scanned_master'" class="w130 text-center">Open By</th>
                                                                                                                    
                                                                                                                    <th *ngIf="mode == 'scanned_master'" class="w100">View Details</th>
                                                                                                                    <th *ngIf="mode == 'available_master'" class="w180 text-center ">Action</th>
                                                                                                                    
                                                                                                                </tr>
                                                                                                            </table>
                                                                                                        </div>
                                                                                                        
                                                                                                        <div class="header border-bott">
                                                                                                            <table>
                                                                                                                <tr>
                                                                                                                    <th class="w40 text-center"></th>
                                                                                                                    <th class="w150">
                                                                                                                        <div class="vaild-into">
                                                                                                                            <div class="date-form wp-21 mr10">
                                                                                                                                <!-- <i *ngIf="filter.date" class="material-icons" (click)="filter.date = '';get_secondary_or_master_coupon_list(mode ,'') ">clear</i> -->
                                                                                                                                <mat-form-field>
                                                                                                                                    <input matInput placeholder=" Date" [(ngModel)]="filter.date_created"
                                                                                                                                    (click)="openDatePicker(picker1)" name="date" matInput
                                                                                                                                    (dateChange)="get_secondary_or_master_coupon_list(mode ,'')"
                                                                                                                                    [matDatepicker]="picker1" readonly>
                                                                                                                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                                                                                                                    <mat-datepicker #picker1></mat-datepicker>
                                                                                                                                </mat-form-field>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    </th>
                                                                                                                    <th class="w150">
                                                                                                                        <div class="form-area wp-21">
                                                                                                                            <div class="search-form">
                                                                                                                                <input type="text" placeholder="Search" [(ngModel)]="filter.created_by"
                                                                                                                                (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                                                                <i class="material-icons">search</i>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    </th>
                                                                                                                    <th class="w170 text-center">
                                                                                                                        <div class="form-area wp-21">
                                                                                                                            <div class="search-form">
                                                                                                                                <input type="text" placeholder="Search" [(ngModel)]="filter.master_box_qr_code"
                                                                                                                                (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                                                                <i class="material-icons">search</i>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    </th>
                                                                                                                    <th class="w100 text-center">
                                                                                                                        <div class="form-area wp-21" *ngIf="db.datauser.id != '143' && db.datauser.id != '144'">
                                                                                                                            <div class="slect">
                                                                                                                                <mat-form-field>
                                                                                                                                    <mat-select [(ngModel)]="filter.coupon_group_type" name="coupon_group_type"
                                                                                                                                    #coupon_group_type="ngModel" (selectionChange)="getScannedList('')">
                                                                                                                                    <mat-option value="All">All</mat-option>
                                                                                                                                    <mat-option value="PTMT">PTMT</mat-option>
                                                                                                                                    <mat-option value="Others">Others</mat-option>
                                                                                                                                </mat-select>
                                                                                                                            </mat-form-field>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </th>
                                                                                                                <th *ngIf="mode == 'scanned_master'" class="w150"></th>
                                                                                                                <th *ngIf="mode == 'scanned_master'" class="w200"></th>
                                                                                                                
                                                                                                                <th *ngIf="mode == 'scanned_master'" class="w150 text-center"></th>
                                                                                                                <th *ngIf="mode == 'scanned_master'" class="w130 text-center"></th>
                                                                                                                
                                                                                                                <th *ngIf="mode == 'scanned_master'" class="w130 text-center">
                                                                                                                    <div class="form-area wp-21">
                                                                                                                        <div class="search-form">
                                                                                                                            <input type="text" placeholder="Search" [(ngModel)]="filter.order_id"
                                                                                                                            (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                                                            <i class="material-icons">search</i>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </th>
                                                                                                                <th *ngIf="mode == 'scanned_master'" class="w130 text-center">
                                                                                                                    <div class="vaild-into">
                                                                                                                        <div class="date-form wp-21 mr10">
                                                                                                                            <!-- <i *ngIf="filter.date" class="material-icons" (click)="filter.date = '';get_secondary_or_master_coupon_list(mode ,'') ">clear</i> -->
                                                                                                                            <mat-form-field>
                                                                                                                                <input matInput placeholder=" Date" [(ngModel)]="filter.dispatch_on"
                                                                                                                                (click)="openDatePicker(dispatch_date_picker)" name="date" matInput
                                                                                                                                (dateChange)="get_secondary_or_master_coupon_list(mode ,'')"
                                                                                                                                [matDatepicker]="dispatch_date_picker" readonly>
                                                                                                                                <mat-datepicker-toggle matSuffix [for]="dispatch_date_picker">
                                                                                                                                </mat-datepicker-toggle>
                                                                                                                                <mat-datepicker #dispatch_date_picker></mat-datepicker>
                                                                                                                            </mat-form-field>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </th>
                                                                                                                <th *ngIf="mode == 'scanned_master'" class="w130 text-center">
                                                                                                                    <div class="form-area wp-21">
                                                                                                                        <div class="search-form">
                                                                                                                            <input type="text" placeholder="Search" [(ngModel)]="filter.dispatch_by_name"
                                                                                                                            (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                                                            <i class="material-icons">search</i>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </th>
                                                                                                                <th *ngIf="mode == 'scanned_master'" class="w130 text-center">
                                                                                                                    <div class="form-area wp-21">
                                                                                                                        <div class="search-form">
                                                                                                                            <input type="text" placeholder="Search" [(ngModel)]="filter.assigned_to_dr_name"
                                                                                                                            (keyup.enter)="get_secondary_or_master_coupon_list(mode ,'')">
                                                                                                                            <i class="material-icons">search</i>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </th>
                                                                                                                <th *ngIf="mode == 'scanned_master' && false" class="w130 text-center"></th>
                                                                                                                
                                                                                                                <th *ngIf="mode == 'scanned_master'" class="w130 text-center"></th>
                                                                                                                
                                                                                                                
                                                                                                                <th *ngIf="mode == 'scanned_master'" class="w130 text-center"></th>
                                                                                                                <th *ngIf="mode == 'scanned_master'" class="w130 text-center"></th>
                                                                                                                
                                                                                                                
                                                                                                                <th *ngIf="mode == 'scanned_master'" class="w100"></th>
                                                                                                                <th *ngIf="mode == 'available_master'" class="w180 text-center "></th>
                                                                                                            </tr>
                                                                                                        </table>
                                                                                                    </div>
                                                                                                    
                                                                                                </div>
                                                                                                
                                                                                            </div>
                                                                                            <div class="css-table" [ngClass]="mode == 'scanned_master' ? 'min_content' : ''">
                                                                                                <div class="table-container">
                                                                                                    <div class="table-body">
                                                                                                        <table>
                                                                                                            <tr
                                                                                                            *ngFor="let coupon_data of (mode == 'available_master' ? available_master_qr_code_list.data : scanned_master_qr_code_list.data); let i=index">
                                                                                                            <td class="w40 text-center">{{mode == 'available_master' ?
                                                                                                                available_master_qr_code_list.from+i : scanned_master_qr_code_list.from+i}}</td>
                                                                                                                <td class="w150">{{coupon_data.date_created | date : 'd MMM, y'}}</td>
                                                                                                                <td class="w150"> {{coupon_data.created_by_name | titlecase}}</td>
                                                                                                                <td class="w170 text-center"> {{coupon_data.master_box_qr_code}}</td>
                                                                                                                <td class="w100 text-center">{{coupon_data.coupon_group_type}}</td>
                                                                                                                <td *ngIf="mode == 'scanned_master'" class="w150">{{coupon_data.scanned_on | date : 'd MMM,
                                                                                                                    y'}}</td>
                                                                                                                    <td *ngIf="mode == 'scanned_master'" class="w200">{{coupon_data.scanned_by_name}}</td>
                                                                                                                    
                                                                                                                    <td *ngIf="mode == 'scanned_master'" class="w150 text-center">
                                                                                                                        {{coupon_data.total_no_of_item}}</td>
                                                                                                                        <td *ngIf="mode == 'scanned_master'" class="w130 text-center">
                                                                                                                            {{coupon_data.total_no_of_secondary_box_sync}}</td>
                                                                                                                            
                                                                                                                            <td *ngIf="mode == 'scanned_master'" class="w130 text-center">{{coupon_data.order_id &&
                                                                                                                                coupon_data.order_id!= '' ? coupon_data.order_id : '--'}}</td>
                                                                                                                                <td *ngIf="mode == 'scanned_master'" class="w130 text-center">{{coupon_data.dispatch_on &&
                                                                                                                                    coupon_data.dispatch_on!= '' && coupon_data.dispatch_on!= '0000-00-00' ?
                                                                                                                                    (coupon_data.dispatch_on | date : 'd MMM y') : '--'}}</td>
                                                                                                                                    <td *ngIf="mode == 'scanned_master'" class="w130 text-center">{{coupon_data.dispatch_by_name
                                                                                                                                        && coupon_data.dispatch_by_name!= '' && coupon_data.dispatch_by_name!= null ?
                                                                                                                                        coupon_data.dispatch_by_name : '--'}}</td>
                                                                                                                                        <td *ngIf="mode == 'scanned_master'" class="w130 text-center">
                                                                                                                                            {{coupon_data.assigned_to_dr_name && coupon_data.assigned_to_dr_name!= '' ?
                                                                                                                                            coupon_data.assigned_to_dr_name : '--'}}</td>
                                                                                                                                            <td *ngIf="mode == 'scanned_master' && false" class="w130 text-center">{{coupon_data.remarks
                                                                                                                                                && coupon_data.remarks!= '' ? coupon_data.remarks : '--'}}</td>
                                                                                                                                                
                                                                                                                                                <td *ngIf="mode == 'scanned_master'" class="w130 text-center">{{coupon_data.ware_house_name
                                                                                                                                                    && coupon_data.ware_house_name!= '' && coupon_data.ware_house_name!= null ?
                                                                                                                                                    coupon_data.ware_house_name : '--'}}</td>
                                                                                                                                                    
                                                                                                                                                    
                                                                                                                                                    <td *ngIf="mode == 'scanned_master'" class="w130 text-center">{{
                                                                                                                                                        coupon_data.box_destroy_flag == 1 ? ( coupon_data.box_destroy_on &&
                                                                                                                                                        coupon_data.box_destroy_on!= '' && coupon_data.box_destroy_on!= '0000-00-00 00:00:00' ?
                                                                                                                                                        (coupon_data.box_destroy_on | date :' d MMM, y hh:mm a') : '--') : '--'}}</td>
                                                                                                                                                        <td *ngIf="mode == 'scanned_master'" class="w130 text-center">{{
                                                                                                                                                            coupon_data.box_destroy_flag == 1 ? ( coupon_data.box_destroy_by_name &&
                                                                                                                                                            coupon_data.box_destroy_by_name!= '' ? coupon_data.box_destroy_by_name : '--') : '--'}}
                                                                                                                                                        </td>
                                                                                                                                                        
                                                                                                                                                        <td *ngIf="mode == 'scanned_master'" class="w100 text-center">
                                                                                                                                                            <a (click)="coupon_data.box_destroy_flag == 0 ? view_dispatch_item_details(coupon_data.id) : ''"
                                                                                                                                                            class="" [ngClass]="{'link':coupon_data.box_destroy_flag == 0}">View</a>
                                                                                                                                                        </td>
                                                                                                                                                        <td *ngIf="mode == 'available_master'" class="w180 Reject text-center text-add ">
                                                                                                                                                            <a (click)="delete_secondary_or_master_available_coupon(coupon_data.id,mode)"><i
                                                                                                                                                                class="material-icons deactive">delete_sweep</i>delete</a>
                                                                                                                                                            </td>
                                                                                                                                                            
                                                                                                                                                        </tr>
                                                                                                                                                    </table>
                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                        </div>
                                                                                                                                    </div>
                                                                                                                                    
                                                                                                                                    <div class="date-not"
                                                                                                                                    *ngIf=" mode == 'available_primary' && ( !loading_list && (filtering && coupon.length == 0 ))">
                                                                                                                                    <div class="no-img">
                                                                                                                                        <img src="assets/result-not-found.png">
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                                
                                                                                                                                <div class="date-not"
                                                                                                                                *ngIf=" mode == 'available_primary' && ( !loading_list && (!filtering && coupon.length == 0 ) ) ">
                                                                                                                                <div class="no-img">
                                                                                                                                    <img src="assets/not-available.jpg">
                                                                                                                                </div>
                                                                                                                                
                                                                                                                            </div>
                                                                                                                            
                                                                                                                            
                                                                                                                            <div class="date-not"
                                                                                                                            *ngIf=" mode == 'scanned_primary' && ( !loading_list && (filtering && scanned_coupon.length == 0 ))">
                                                                                                                            <div class="no-img">
                                                                                                                                <img src="assets/result-not-found.png">
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        
                                                                                                                        <div class="date-not"
                                                                                                                        *ngIf=" mode == 'scanned_primary' && ( !loading_list && (!filtering && scanned_coupon.length == 0 ) ) ">
                                                                                                                        <div class="no-img">
                                                                                                                            <img src="assets/not-available.jpg">
                                                                                                                        </div>
                                                                                                                        
                                                                                                                    </div>
                                                                                                                    
                                                                                                                    
                                                                                                                    
                                                                                                                </div>
                                                                                                                
                                                                                                                
                                                                                                                
                                                                                                                
                                                                                                                
                                                                                                                
                                                                                                                
                                                                                                                
                                                                                                                
                                                                                                                <!-- Excel code -->
                                                                                                                
                                                                                                                <div class="excel-btn" (click)="exportAvailableCouponList(mode)" *ngIf="mode == 'available_primary' && coupon.length">
                                                                                                                    <div class="image-area">
                                                                                                                        <a>
                                                                                                                            <img src="assets/excel.svg">
                                                                                                                        </a>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div class="excel-btn" (click)="exportScannedCouponList()" *ngIf="mode == 'scanned_primary' && scanned_coupon.length">
                                                                                                                    <div class="image-area">
                                                                                                                        <a>
                                                                                                                            <img src="assets/excel.svg">
                                                                                                                        </a>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                
                                                                                                                <!-- </div> -->