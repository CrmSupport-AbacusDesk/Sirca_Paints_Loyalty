<div class="loader" *ngIf="loading_list">
  <div class="loding-logo">
    <mat-spinner></mat-spinner>
  </div>
</div>

<div class="main-container">
  <div class="fixed">
    <div class="middle-container">
      <div class="tabs-list gift-tab-list pl6">
        <h1>Gift Master</h1>
        <div class="input-field">
          <input type="text" placeholder="Search..." [(ngModel)]="filter.search"
            (keyup.enter)="current_page=1;getGiftMasterList()">
          <i class="material-icons">search</i>
        </div>
      </div>
    </div>
  </div>

  <div class="container-outer tab-container">
    <div class="master-tab">
      <ul>
        <li routerLink="/main-catefory-list" routerLinkActive="active"><a>Main Category</a></li>
        <li routerLink="/sub-category-list" routerLinkActive="active"><a>Category</a></li>
        <li routerLink="/products-list" routerLinkActive="active"><a>Products</a></li>
        <!-- <li routerLink="/video-list" routerLinkActive="active"><a>Videos</a></li> -->
        <li routerLink="/login-banner-list" routerLinkActive="active"><a>Login Banner</a></li>
        <li routerLink="/registration-loyality" routerLinkActive="active"><a>Registration Loyality</a></li>
        <li routerLink="/referral-master" routerLinkActive="active"><a>Points Master</a></li>
        <li routerLink="/gift-master-list" routerLinkActive="active"><a>Gift Master</a></li>

        <!-- <li routerLink="/special-dis" routerLinkActive="active"><a>Special Discount/Extra Premium</a></li> -->
        <!-- <li routerLink="/plumber-meet-data" routerLinkActive="active"><a>Plumber Meet Data</a></li> -->

      </ul>
    </div>

    <div class="row">
      <div class="css-table hr-scroll-table left-right-15">
        <div class="sticky-header">
          <div class="header">
            <table>
              <tr>
                <th class="w50">&nbsp;</th>
                <th class="w140">Date Created</th>
                <th class="w140">Created By</th>
                <th class="w140">Gift Name</th>
                <th class="w140">Gift Points</th>
                <th class="w160">Gift Image</th>
              </tr>

            </table>
          </div>

          <div class="header border-bott">
            <table>
              <tr>
                <th class="w50">&nbsp;</th>
                <th class="w140">
                  <!-- <div class="date-form">
                                  <i *ngIf="filter.date" class="material-icons" (click)="filter.date = '';getSubCategoryList() ">clear</i>
                                  
                                  <mat-form-field >
                                      <input placeholder="Date" [(ngModel)]="filter.date" (click)="openDatePicker(picker)"  name="date" matInput (dateChange)="getSubCategoryList()" [matDatepicker]="picker" readonly>
                                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                      <mat-datepicker #picker></mat-datepicker>
                                  </mat-form-field>
                              </div> -->
                </th>
                <th class="w140">
                  <!-- <div class="form-area">
                                  <div class="slect">
                                      <mat-form-field>
                                          <mat-label>Search</mat-label>
                                          <mat-select  name="main_category"  (selectionChange)="getSubCategoryList();getSubCategoryList()"  [(ngModel)]="filter.main_category" #main_category="ngModel" required>
                                              <mat-option  value=""> All </mat-option>
                                              <mat-option *ngFor="let val of ma_category" [value]="val.main_category"> {{val.main_category}} </mat-option>
                                          </mat-select>
                                      </mat-form-field>
                                  </div>
                              </div> -->

                </th>
                <th class="w140">
                  <!-- <div class="form-area">
                                  <div class="slect">
                                      <mat-form-field>
                                          <mat-label>Search</mat-label>
                                          <mat-select  name="category_name"  (selectionChange)="getSubCategoryList()"  [(ngModel)]="filter.category_name" #category_name="ngModel" required>
                                              <mat-option  value=""> All </mat-option>
                                              <mat-option *ngFor="let val of category" [value]="val.category_name"> {{val.category_name}} </mat-option>
                                          </mat-select>
                                      </mat-form-field>
                                  </div>
                              </div> -->

                </th>
                <th class="w140">
                  <!-- <div class="search-form">
                                  <input type="text" placeholder="Search" [(ngModel)]="filter.product_name"  (keyup.enter)="current_page = 1;getSubCategoryList()">
                                  <i class="material-icons">search</i>
                              </div> -->
                </th>
                <th class="w140">
                  <!-- <div class="search-form">
                                  <input type="text" placeholder="Search" [(ngModel)]="filter.product_code"  (keyup.enter)="current_page = 1;getSubCategoryList()">
                                  <i class="material-icons">search</i>
                              </div> -->
                </th>
                <!-- <th class="w150"></th> -->
                <!-- <th class="w70">
                              <div class="form-area">
                                  <div class="slect">
                                      <mat-form-field>
                                          <mat-label>Search</mat-label>
                                          <mat-select  [(ngModel)]="filter.group_type" name="group_type" #group_type="ngModel" (selectionChange)="getProductList()">
                                              <mat-option value="">All</mat-option>
                                              <mat-option value="PTMT">PTMT</mat-option>
                                              <mat-option value="Other">Others</mat-option>
                                          </mat-select>
                                      </mat-form-field>
                                  </div>
                              </div>
                          </th> -->
                <!-- <th class="w150">
                  <div class="form-area">
                                  <div class="slect">
                                      <mat-form-field>
                                          <mat-label>Search</mat-label>
                                          <mat-select  [(ngModel)]="filter.new_arrival" name="new_arrival" #new_arrival="ngModel" (selectionChange)="getSubCategoryList()">
                                              <mat-option value="">All</mat-option>
                                              <mat-option value="Yes">Yes</mat-option>
                                              <mat-option value="No">No</mat-option>
                                          </mat-select>
                                      </mat-form-field>
                                  </div>
                              </div>
                </th> -->
            
                <!-- <th class="w200">
                  <table>
                    <tr>
                      <th>

                      </th>
                    </tr>
                  </table>
                </th> -->
              </tr>
            </table>
          </div>
        </div>

        <div class="table-container">
          <div class="table-body">
            <table>
              <tr *ngFor="let val of giftMasterList; let i = index">
                <td class="w50">
               
                  <img [src]="val.actual_image_name"
                    (click)="openDialog(val.actual_image_name,'test1')">
                  <!-- </ng-container> -->
                </td>
                <td class="w140">
                  <ng-container *ngIf="val.date_created  != '0000-00-00 00:00:00' ">
                    <div class="date-tr">
                      <p>{{val.date_created | date: 'dd MMM yyyy'}}</p>
                      <span> {{val.created_name}}</span>
                    </div>
                  </ng-container>
                </td>
                <td class="w140">{{val.main_category}}</td>
                <td class="w140">{{val.category_name}}</td>
                <td class="w140">{{val.contractor_points}}</td>
                <td class="w160">{{val.dealer_points }}</td>
              
              </tr>

            </table>
          </div>
        </div>
      </div>
    </div>

  </div>

</div>

<div class="add-button">
  <button mat-button (click)="toggle1 = !toggle1; addGiftMaster()"><i class="material-icons">add</i></button>
</div>


<div class="side-main" [ngClass]="{'on' : toggle1 == true}">
  <div class="category-field" >
      <form name="category" (ngSubmit)="f.form.valid && SaveGiftMaster(f)" #f="ngForm" novalidate autocomplete="off">
          <div class="category-hadding">
              <h2>Add Gift Master</h2>
              <i class="material-icons" (click)="toggle1 = !toggle1;">clear</i>
          </div>
          
          <div class="add-image">
              <div class="option-field">
                  <div class="control-field">
                      <mat-form-field class="cs-input">                          
                          <input matInput placeholder="Gift Name" name="gift_name" [(ngModel)]="giftCategory.gift_name" #gift_name="ngModel" required>
                      </mat-form-field>
                  </div>
              </div>
              
             

              <div class="option-field">
                  <div class="control-field">
                      <mat-form-field class="cs-input">
                          <input type="number" matInput placeholder="Gift Points"  name="gift_points" [(ngModel)]="giftCategory.gift_points" #gift_points="ngModel" required>
                      </mat-form-field>  
                  </div>
              </div>
              
           
              
              <div class="uploade-image">
                  <h4>Upload Image</h4>
                  <ul>
                      
                      <div *ngIf="image !=[]">
                      <li *ngFor="let data of image; let i=index" >
                          <img [src]="data.image">
                          <span class="cancel-icon">
                              <i class="material-icons check-icon" (click)="ProductProfile(i)">done</i>
                              <i class="material-icons crose-icon " (click)="deleteGiftMasterImage(i)">clear</i>
                          </span>									
                      </li>
                  </div>
               
                      <li class="add-bg-1" >
                          <label>
                              <input type="file" (change)="onUploadChange($event)" style="display:none;" accept=".png, .jpg, .jpeg"  />

                              <img [src]="giftCategory.image" alt="" id="img">
                              <h4>Upload Image</h4>
                              
                             
                          </label>
                      </li>
                  </ul>
                  </div>
                  
                  <div class="save btn-save mt90" [ngClass]="{loading: savingData}">
                      <button mat-button [disabled]="save_button_disabled" >SAVE</button>
                     
                  </div>
              </div>
          </form>
      </div>
      
      
      
      <div class="side-bg" (click)="toggle1 = !toggle1"></div>
  </div>